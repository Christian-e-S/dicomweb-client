{"version":3,"file":"dicomweb-client.js","sources":["../node_modules/ajv/lib/ajv.js","../node_modules/xhr2/lib/xhr2.js","../src/message.js","../src/api.js","../src/utils.js","../src/dicomweb-client.js"],"sourcesContent":["'use strict';\n\nvar compileSchema = require('./compile')\n  , resolve = require('./compile/resolve')\n  , Cache = require('./cache')\n  , SchemaObject = require('./compile/schema_obj')\n  , stableStringify = require('fast-json-stable-stringify')\n  , formats = require('./compile/formats')\n  , rules = require('./compile/rules')\n  , $dataMetaSchema = require('./data')\n  , util = require('./compile/util');\n\nmodule.exports = Ajv;\n\nAjv.prototype.validate = validate;\nAjv.prototype.compile = compile;\nAjv.prototype.addSchema = addSchema;\nAjv.prototype.addMetaSchema = addMetaSchema;\nAjv.prototype.validateSchema = validateSchema;\nAjv.prototype.getSchema = getSchema;\nAjv.prototype.removeSchema = removeSchema;\nAjv.prototype.addFormat = addFormat;\nAjv.prototype.errorsText = errorsText;\n\nAjv.prototype._addSchema = _addSchema;\nAjv.prototype._compile = _compile;\n\nAjv.prototype.compileAsync = require('./compile/async');\nvar customKeyword = require('./keyword');\nAjv.prototype.addKeyword = customKeyword.add;\nAjv.prototype.getKeyword = customKeyword.get;\nAjv.prototype.removeKeyword = customKeyword.remove;\n\nvar errorClasses = require('./compile/error_classes');\nAjv.ValidationError = errorClasses.Validation;\nAjv.MissingRefError = errorClasses.MissingRef;\nAjv.$dataMetaSchema = $dataMetaSchema;\n\nvar META_SCHEMA_ID = 'http://json-schema.org/draft-07/schema';\n\nvar META_IGNORE_OPTIONS = [ 'removeAdditional', 'useDefaults', 'coerceTypes' ];\nvar META_SUPPORT_DATA = ['/properties'];\n\n/**\n * Creates validator instance.\n * Usage: `Ajv(opts)`\n * @param {Object} opts optional options\n * @return {Object} ajv instance\n */\nfunction Ajv(opts) {\n  if (!(this instanceof Ajv)) return new Ajv(opts);\n  opts = this._opts = util.copy(opts) || {};\n  setLogger(this);\n  this._schemas = {};\n  this._refs = {};\n  this._fragments = {};\n  this._formats = formats(opts.format);\n  var schemaUriFormat = this._schemaUriFormat = this._formats['uri-reference'];\n  this._schemaUriFormatFunc = function (str) { return schemaUriFormat.test(str); };\n\n  this._cache = opts.cache || new Cache;\n  this._loadingSchemas = {};\n  this._compilations = [];\n  this.RULES = rules();\n  this._getId = chooseGetId(opts);\n\n  opts.loopRequired = opts.loopRequired || Infinity;\n  if (opts.errorDataPath == 'property') opts._errorDataPathProperty = true;\n  if (opts.serialize === undefined) opts.serialize = stableStringify;\n  this._metaOpts = getMetaSchemaOptions(this);\n\n  if (opts.formats) addInitialFormats(this);\n  addDraft6MetaSchema(this);\n  if (typeof opts.meta == 'object') this.addMetaSchema(opts.meta);\n  addInitialSchemas(this);\n}\n\n\n\n/**\n * Validate data using schema\n * Schema will be compiled and cached (using serialized JSON as key. [fast-json-stable-stringify](https://github.com/epoberezkin/fast-json-stable-stringify) is used to serialize.\n * @this   Ajv\n * @param  {String|Object} schemaKeyRef key, ref or schema object\n * @param  {Any} data to be validated\n * @return {Boolean} validation result. Errors from the last validation will be available in `ajv.errors` (and also in compiled schema: `schema.errors`).\n */\nfunction validate(schemaKeyRef, data) {\n  var v;\n  if (typeof schemaKeyRef == 'string') {\n    v = this.getSchema(schemaKeyRef);\n    if (!v) throw new Error('no schema with key or ref \"' + schemaKeyRef + '\"');\n  } else {\n    var schemaObj = this._addSchema(schemaKeyRef);\n    v = schemaObj.validate || this._compile(schemaObj);\n  }\n\n  var valid = v(data);\n  if (v.$async !== true) this.errors = v.errors;\n  return valid;\n}\n\n\n/**\n * Create validating function for passed schema.\n * @this   Ajv\n * @param  {Object} schema schema object\n * @param  {Boolean} _meta true if schema is a meta-schema. Used internally to compile meta schemas of custom keywords.\n * @return {Function} validating function\n */\nfunction compile(schema, _meta) {\n  var schemaObj = this._addSchema(schema, undefined, _meta);\n  return schemaObj.validate || this._compile(schemaObj);\n}\n\n\n/**\n * Adds schema to the instance.\n * @this   Ajv\n * @param {Object|Array} schema schema or array of schemas. If array is passed, `key` and other parameters will be ignored.\n * @param {String} key Optional schema key. Can be passed to `validate` method instead of schema object or id/ref. One schema per instance can have empty `id` and `key`.\n * @param {Boolean} _skipValidation true to skip schema validation. Used internally, option validateSchema should be used instead.\n * @param {Boolean} _meta true if schema is a meta-schema. Used internally, addMetaSchema should be used instead.\n * @return {Ajv} this for method chaining\n */\nfunction addSchema(schema, key, _skipValidation, _meta) {\n  if (Array.isArray(schema)){\n    for (var i=0; i<schema.length; i++) this.addSchema(schema[i], undefined, _skipValidation, _meta);\n    return this;\n  }\n  var id = this._getId(schema);\n  if (id !== undefined && typeof id != 'string')\n    throw new Error('schema id must be string');\n  key = resolve.normalizeId(key || id);\n  checkUnique(this, key);\n  this._schemas[key] = this._addSchema(schema, _skipValidation, _meta, true);\n  return this;\n}\n\n\n/**\n * Add schema that will be used to validate other schemas\n * options in META_IGNORE_OPTIONS are alway set to false\n * @this   Ajv\n * @param {Object} schema schema object\n * @param {String} key optional schema key\n * @param {Boolean} skipValidation true to skip schema validation, can be used to override validateSchema option for meta-schema\n * @return {Ajv} this for method chaining\n */\nfunction addMetaSchema(schema, key, skipValidation) {\n  this.addSchema(schema, key, skipValidation, true);\n  return this;\n}\n\n\n/**\n * Validate schema\n * @this   Ajv\n * @param {Object} schema schema to validate\n * @param {Boolean} throwOrLogError pass true to throw (or log) an error if invalid\n * @return {Boolean} true if schema is valid\n */\nfunction validateSchema(schema, throwOrLogError) {\n  var $schema = schema.$schema;\n  if ($schema !== undefined && typeof $schema != 'string')\n    throw new Error('$schema must be a string');\n  $schema = $schema || this._opts.defaultMeta || defaultMeta(this);\n  if (!$schema) {\n    this.logger.warn('meta-schema not available');\n    this.errors = null;\n    return true;\n  }\n  var currentUriFormat = this._formats.uri;\n  this._formats.uri = typeof currentUriFormat == 'function'\n                      ? this._schemaUriFormatFunc\n                      : this._schemaUriFormat;\n  var valid;\n  try { valid = this.validate($schema, schema); }\n  finally { this._formats.uri = currentUriFormat; }\n  if (!valid && throwOrLogError) {\n    var message = 'schema is invalid: ' + this.errorsText();\n    if (this._opts.validateSchema == 'log') this.logger.error(message);\n    else throw new Error(message);\n  }\n  return valid;\n}\n\n\nfunction defaultMeta(self) {\n  var meta = self._opts.meta;\n  self._opts.defaultMeta = typeof meta == 'object'\n                            ? self._getId(meta) || meta\n                            : self.getSchema(META_SCHEMA_ID)\n                              ? META_SCHEMA_ID\n                              : undefined;\n  return self._opts.defaultMeta;\n}\n\n\n/**\n * Get compiled schema from the instance by `key` or `ref`.\n * @this   Ajv\n * @param  {String} keyRef `key` that was passed to `addSchema` or full schema reference (`schema.id` or resolved id).\n * @return {Function} schema validating function (with property `schema`).\n */\nfunction getSchema(keyRef) {\n  var schemaObj = _getSchemaObj(this, keyRef);\n  switch (typeof schemaObj) {\n    case 'object': return schemaObj.validate || this._compile(schemaObj);\n    case 'string': return this.getSchema(schemaObj);\n    case 'undefined': return _getSchemaFragment(this, keyRef);\n  }\n}\n\n\nfunction _getSchemaFragment(self, ref) {\n  var res = resolve.schema.call(self, { schema: {} }, ref);\n  if (res) {\n    var schema = res.schema\n      , root = res.root\n      , baseId = res.baseId;\n    var v = compileSchema.call(self, schema, root, undefined, baseId);\n    self._fragments[ref] = new SchemaObject({\n      ref: ref,\n      fragment: true,\n      schema: schema,\n      root: root,\n      baseId: baseId,\n      validate: v\n    });\n    return v;\n  }\n}\n\n\nfunction _getSchemaObj(self, keyRef) {\n  keyRef = resolve.normalizeId(keyRef);\n  return self._schemas[keyRef] || self._refs[keyRef] || self._fragments[keyRef];\n}\n\n\n/**\n * Remove cached schema(s).\n * If no parameter is passed all schemas but meta-schemas are removed.\n * If RegExp is passed all schemas with key/id matching pattern but meta-schemas are removed.\n * Even if schema is referenced by other schemas it still can be removed as other schemas have local references.\n * @this   Ajv\n * @param  {String|Object|RegExp} schemaKeyRef key, ref, pattern to match key/ref or schema object\n * @return {Ajv} this for method chaining\n */\nfunction removeSchema(schemaKeyRef) {\n  if (schemaKeyRef instanceof RegExp) {\n    _removeAllSchemas(this, this._schemas, schemaKeyRef);\n    _removeAllSchemas(this, this._refs, schemaKeyRef);\n    return this;\n  }\n  switch (typeof schemaKeyRef) {\n    case 'undefined':\n      _removeAllSchemas(this, this._schemas);\n      _removeAllSchemas(this, this._refs);\n      this._cache.clear();\n      return this;\n    case 'string':\n      var schemaObj = _getSchemaObj(this, schemaKeyRef);\n      if (schemaObj) this._cache.del(schemaObj.cacheKey);\n      delete this._schemas[schemaKeyRef];\n      delete this._refs[schemaKeyRef];\n      return this;\n    case 'object':\n      var serialize = this._opts.serialize;\n      var cacheKey = serialize ? serialize(schemaKeyRef) : schemaKeyRef;\n      this._cache.del(cacheKey);\n      var id = this._getId(schemaKeyRef);\n      if (id) {\n        id = resolve.normalizeId(id);\n        delete this._schemas[id];\n        delete this._refs[id];\n      }\n  }\n  return this;\n}\n\n\nfunction _removeAllSchemas(self, schemas, regex) {\n  for (var keyRef in schemas) {\n    var schemaObj = schemas[keyRef];\n    if (!schemaObj.meta && (!regex || regex.test(keyRef))) {\n      self._cache.del(schemaObj.cacheKey);\n      delete schemas[keyRef];\n    }\n  }\n}\n\n\n/* @this   Ajv */\nfunction _addSchema(schema, skipValidation, meta, shouldAddSchema) {\n  if (typeof schema != 'object' && typeof schema != 'boolean')\n    throw new Error('schema should be object or boolean');\n  var serialize = this._opts.serialize;\n  var cacheKey = serialize ? serialize(schema) : schema;\n  var cached = this._cache.get(cacheKey);\n  if (cached) return cached;\n\n  shouldAddSchema = shouldAddSchema || this._opts.addUsedSchema !== false;\n\n  var id = resolve.normalizeId(this._getId(schema));\n  if (id && shouldAddSchema) checkUnique(this, id);\n\n  var willValidate = this._opts.validateSchema !== false && !skipValidation;\n  var recursiveMeta;\n  if (willValidate && !(recursiveMeta = id && id == resolve.normalizeId(schema.$schema)))\n    this.validateSchema(schema, true);\n\n  var localRefs = resolve.ids.call(this, schema);\n\n  var schemaObj = new SchemaObject({\n    id: id,\n    schema: schema,\n    localRefs: localRefs,\n    cacheKey: cacheKey,\n    meta: meta\n  });\n\n  if (id[0] != '#' && shouldAddSchema) this._refs[id] = schemaObj;\n  this._cache.put(cacheKey, schemaObj);\n\n  if (willValidate && recursiveMeta) this.validateSchema(schema, true);\n\n  return schemaObj;\n}\n\n\n/* @this   Ajv */\nfunction _compile(schemaObj, root) {\n  if (schemaObj.compiling) {\n    schemaObj.validate = callValidate;\n    callValidate.schema = schemaObj.schema;\n    callValidate.errors = null;\n    callValidate.root = root ? root : callValidate;\n    if (schemaObj.schema.$async === true)\n      callValidate.$async = true;\n    return callValidate;\n  }\n  schemaObj.compiling = true;\n\n  var currentOpts;\n  if (schemaObj.meta) {\n    currentOpts = this._opts;\n    this._opts = this._metaOpts;\n  }\n\n  var v;\n  try { v = compileSchema.call(this, schemaObj.schema, root, schemaObj.localRefs); }\n  catch(e) {\n    delete schemaObj.validate;\n    throw e;\n  }\n  finally {\n    schemaObj.compiling = false;\n    if (schemaObj.meta) this._opts = currentOpts;\n  }\n\n  schemaObj.validate = v;\n  schemaObj.refs = v.refs;\n  schemaObj.refVal = v.refVal;\n  schemaObj.root = v.root;\n  return v;\n\n\n  /* @this   {*} - custom context, see passContext option */\n  function callValidate() {\n    /* jshint validthis: true */\n    var _validate = schemaObj.validate;\n    var result = _validate.apply(this, arguments);\n    callValidate.errors = _validate.errors;\n    return result;\n  }\n}\n\n\nfunction chooseGetId(opts) {\n  switch (opts.schemaId) {\n    case 'auto': return _get$IdOrId;\n    case 'id': return _getId;\n    default: return _get$Id;\n  }\n}\n\n/* @this   Ajv */\nfunction _getId(schema) {\n  if (schema.$id) this.logger.warn('schema $id ignored', schema.$id);\n  return schema.id;\n}\n\n/* @this   Ajv */\nfunction _get$Id(schema) {\n  if (schema.id) this.logger.warn('schema id ignored', schema.id);\n  return schema.$id;\n}\n\n\nfunction _get$IdOrId(schema) {\n  if (schema.$id && schema.id && schema.$id != schema.id)\n    throw new Error('schema $id is different from id');\n  return schema.$id || schema.id;\n}\n\n\n/**\n * Convert array of error message objects to string\n * @this   Ajv\n * @param  {Array<Object>} errors optional array of validation errors, if not passed errors from the instance are used.\n * @param  {Object} options optional options with properties `separator` and `dataVar`.\n * @return {String} human readable string with all errors descriptions\n */\nfunction errorsText(errors, options) {\n  errors = errors || this.errors;\n  if (!errors) return 'No errors';\n  options = options || {};\n  var separator = options.separator === undefined ? ', ' : options.separator;\n  var dataVar = options.dataVar === undefined ? 'data' : options.dataVar;\n\n  var text = '';\n  for (var i=0; i<errors.length; i++) {\n    var e = errors[i];\n    if (e) text += dataVar + e.dataPath + ' ' + e.message + separator;\n  }\n  return text.slice(0, -separator.length);\n}\n\n\n/**\n * Add custom format\n * @this   Ajv\n * @param {String} name format name\n * @param {String|RegExp|Function} format string is converted to RegExp; function should return boolean (true when valid)\n * @return {Ajv} this for method chaining\n */\nfunction addFormat(name, format) {\n  if (typeof format == 'string') format = new RegExp(format);\n  this._formats[name] = format;\n  return this;\n}\n\n\nfunction addDraft6MetaSchema(self) {\n  var $dataSchema;\n  if (self._opts.$data) {\n    $dataSchema = require('./refs/data.json');\n    self.addMetaSchema($dataSchema, $dataSchema.$id, true);\n  }\n  if (self._opts.meta === false) return;\n  var metaSchema = require('./refs/json-schema-draft-07.json');\n  if (self._opts.$data) metaSchema = $dataMetaSchema(metaSchema, META_SUPPORT_DATA);\n  self.addMetaSchema(metaSchema, META_SCHEMA_ID, true);\n  self._refs['http://json-schema.org/schema'] = META_SCHEMA_ID;\n}\n\n\nfunction addInitialSchemas(self) {\n  var optsSchemas = self._opts.schemas;\n  if (!optsSchemas) return;\n  if (Array.isArray(optsSchemas)) self.addSchema(optsSchemas);\n  else for (var key in optsSchemas) self.addSchema(optsSchemas[key], key);\n}\n\n\nfunction addInitialFormats(self) {\n  for (var name in self._opts.formats) {\n    var format = self._opts.formats[name];\n    self.addFormat(name, format);\n  }\n}\n\n\nfunction checkUnique(self, id) {\n  if (self._schemas[id] || self._refs[id])\n    throw new Error('schema with key or id \"' + id + '\" already exists');\n}\n\n\nfunction getMetaSchemaOptions(self) {\n  var metaOpts = util.copy(self._opts);\n  for (var i=0; i<META_IGNORE_OPTIONS.length; i++)\n    delete metaOpts[META_IGNORE_OPTIONS[i]];\n  return metaOpts;\n}\n\n\nfunction setLogger(self) {\n  var logger = self._opts.logger;\n  if (logger === false) {\n    self.logger = {log: noop, warn: noop, error: noop};\n  } else {\n    if (logger === undefined) logger = console;\n    if (!(typeof logger == 'object' && logger.log && logger.warn && logger.error))\n      throw new Error('logger must implement log, warn and error methods');\n    self.logger = logger;\n  }\n}\n\n\nfunction noop() {}\n","// Generated by CoffeeScript 1.12.2\n(function() {\n  var InvalidStateError, NetworkError, ProgressEvent, SecurityError, SyntaxError, XMLHttpRequest, XMLHttpRequestEventTarget, XMLHttpRequestUpload, http, https, os, url,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  XMLHttpRequestEventTarget = (function() {\n    function XMLHttpRequestEventTarget() {\n      this.onloadstart = null;\n      this.onprogress = null;\n      this.onabort = null;\n      this.onerror = null;\n      this.onload = null;\n      this.ontimeout = null;\n      this.onloadend = null;\n      this._listeners = {};\n    }\n\n    XMLHttpRequestEventTarget.prototype.onloadstart = null;\n\n    XMLHttpRequestEventTarget.prototype.onprogress = null;\n\n    XMLHttpRequestEventTarget.prototype.onabort = null;\n\n    XMLHttpRequestEventTarget.prototype.onerror = null;\n\n    XMLHttpRequestEventTarget.prototype.onload = null;\n\n    XMLHttpRequestEventTarget.prototype.ontimeout = null;\n\n    XMLHttpRequestEventTarget.prototype.onloadend = null;\n\n    XMLHttpRequestEventTarget.prototype.addEventListener = function(eventType, listener) {\n      var base;\n      eventType = eventType.toLowerCase();\n      (base = this._listeners)[eventType] || (base[eventType] = []);\n      this._listeners[eventType].push(listener);\n      return void 0;\n    };\n\n    XMLHttpRequestEventTarget.prototype.removeEventListener = function(eventType, listener) {\n      var index;\n      eventType = eventType.toLowerCase();\n      if (this._listeners[eventType]) {\n        index = this._listeners[eventType].indexOf(listener);\n        if (index !== -1) {\n          this._listeners[eventType].splice(index, 1);\n        }\n      }\n      return void 0;\n    };\n\n    XMLHttpRequestEventTarget.prototype.dispatchEvent = function(event) {\n      var eventType, j, len, listener, listeners;\n      event.currentTarget = event.target = this;\n      eventType = event.type;\n      if (listeners = this._listeners[eventType]) {\n        for (j = 0, len = listeners.length; j < len; j++) {\n          listener = listeners[j];\n          listener.call(this, event);\n        }\n      }\n      if (listener = this[\"on\" + eventType]) {\n        listener.call(this, event);\n      }\n      return void 0;\n    };\n\n    return XMLHttpRequestEventTarget;\n\n  })();\n\n  http = require('http');\n\n  https = require('https');\n\n  os = require('os');\n\n  url = require('url');\n\n  XMLHttpRequest = (function(superClass) {\n    extend(XMLHttpRequest, superClass);\n\n    function XMLHttpRequest(options) {\n      XMLHttpRequest.__super__.constructor.call(this);\n      this.onreadystatechange = null;\n      this._anonymous = options && options.anon;\n      this.readyState = XMLHttpRequest.UNSENT;\n      this.response = null;\n      this.responseText = '';\n      this.responseType = '';\n      this.responseURL = '';\n      this.status = 0;\n      this.statusText = '';\n      this.timeout = 0;\n      this.upload = new XMLHttpRequestUpload(this);\n      this._method = null;\n      this._url = null;\n      this._sync = false;\n      this._headers = null;\n      this._loweredHeaders = null;\n      this._mimeOverride = null;\n      this._request = null;\n      this._response = null;\n      this._responseParts = null;\n      this._responseHeaders = null;\n      this._aborting = null;\n      this._error = null;\n      this._loadedBytes = 0;\n      this._totalBytes = 0;\n      this._lengthComputable = false;\n    }\n\n    XMLHttpRequest.prototype.onreadystatechange = null;\n\n    XMLHttpRequest.prototype.readyState = null;\n\n    XMLHttpRequest.prototype.response = null;\n\n    XMLHttpRequest.prototype.responseText = null;\n\n    XMLHttpRequest.prototype.responseType = null;\n\n    XMLHttpRequest.prototype.status = null;\n\n    XMLHttpRequest.prototype.timeout = null;\n\n    XMLHttpRequest.prototype.upload = null;\n\n    XMLHttpRequest.prototype.open = function(method, url, async, user, password) {\n      var xhrUrl;\n      method = method.toUpperCase();\n      if (method in this._restrictedMethods) {\n        throw new SecurityError(\"HTTP method \" + method + \" is not allowed in XHR\");\n      }\n      xhrUrl = this._parseUrl(url);\n      if (async === void 0) {\n        async = true;\n      }\n      switch (this.readyState) {\n        case XMLHttpRequest.UNSENT:\n        case XMLHttpRequest.OPENED:\n        case XMLHttpRequest.DONE:\n          null;\n          break;\n        case XMLHttpRequest.HEADERS_RECEIVED:\n        case XMLHttpRequest.LOADING:\n          null;\n      }\n      this._method = method;\n      this._url = xhrUrl;\n      this._sync = !async;\n      this._headers = {};\n      this._loweredHeaders = {};\n      this._mimeOverride = null;\n      this._setReadyState(XMLHttpRequest.OPENED);\n      this._request = null;\n      this._response = null;\n      this.status = 0;\n      this.statusText = '';\n      this._responseParts = [];\n      this._responseHeaders = null;\n      this._loadedBytes = 0;\n      this._totalBytes = 0;\n      this._lengthComputable = false;\n      return void 0;\n    };\n\n    XMLHttpRequest.prototype.setRequestHeader = function(name, value) {\n      var loweredName;\n      if (this.readyState !== XMLHttpRequest.OPENED) {\n        throw new InvalidStateError(\"XHR readyState must be OPENED\");\n      }\n      loweredName = name.toLowerCase();\n      if (this._restrictedHeaders[loweredName] || /^sec\\-/.test(loweredName) || /^proxy-/.test(loweredName)) {\n        console.warn(\"Refused to set unsafe header \\\"\" + name + \"\\\"\");\n        return void 0;\n      }\n      value = value.toString();\n      if (loweredName in this._loweredHeaders) {\n        name = this._loweredHeaders[loweredName];\n        this._headers[name] = this._headers[name] + ', ' + value;\n      } else {\n        this._loweredHeaders[loweredName] = name;\n        this._headers[name] = value;\n      }\n      return void 0;\n    };\n\n    XMLHttpRequest.prototype.send = function(data) {\n      if (this.readyState !== XMLHttpRequest.OPENED) {\n        throw new InvalidStateError(\"XHR readyState must be OPENED\");\n      }\n      if (this._request) {\n        throw new InvalidStateError(\"send() already called\");\n      }\n      switch (this._url.protocol) {\n        case 'file:':\n          this._sendFile(data);\n          break;\n        case 'http:':\n        case 'https:':\n          this._sendHttp(data);\n          break;\n        default:\n          throw new NetworkError(\"Unsupported protocol \" + this._url.protocol);\n      }\n      return void 0;\n    };\n\n    XMLHttpRequest.prototype.abort = function() {\n      if (!this._request) {\n        return;\n      }\n      this._request.abort();\n      this._setError();\n      this._dispatchProgress('abort');\n      this._dispatchProgress('loadend');\n      return void 0;\n    };\n\n    XMLHttpRequest.prototype.getResponseHeader = function(name) {\n      var loweredName;\n      if (!this._responseHeaders) {\n        return null;\n      }\n      loweredName = name.toLowerCase();\n      if (loweredName in this._responseHeaders) {\n        return this._responseHeaders[loweredName];\n      } else {\n        return null;\n      }\n    };\n\n    XMLHttpRequest.prototype.getAllResponseHeaders = function() {\n      var lines, name, value;\n      if (!this._responseHeaders) {\n        return '';\n      }\n      lines = (function() {\n        var ref, results;\n        ref = this._responseHeaders;\n        results = [];\n        for (name in ref) {\n          value = ref[name];\n          results.push(name + \": \" + value);\n        }\n        return results;\n      }).call(this);\n      return lines.join(\"\\r\\n\");\n    };\n\n    XMLHttpRequest.prototype.overrideMimeType = function(newMimeType) {\n      if (this.readyState === XMLHttpRequest.LOADING || this.readyState === XMLHttpRequest.DONE) {\n        throw new InvalidStateError(\"overrideMimeType() not allowed in LOADING or DONE\");\n      }\n      this._mimeOverride = newMimeType.toLowerCase();\n      return void 0;\n    };\n\n    XMLHttpRequest.prototype.nodejsSet = function(options) {\n      var baseUrl, parsedUrl;\n      if ('httpAgent' in options) {\n        this.nodejsHttpAgent = options.httpAgent;\n      }\n      if ('httpsAgent' in options) {\n        this.nodejsHttpsAgent = options.httpsAgent;\n      }\n      if ('baseUrl' in options) {\n        baseUrl = options.baseUrl;\n        if (baseUrl !== null) {\n          parsedUrl = url.parse(baseUrl, false, true);\n          if (!parsedUrl.protocol) {\n            throw new SyntaxError(\"baseUrl must be an absolute URL\");\n          }\n        }\n        this.nodejsBaseUrl = baseUrl;\n      }\n      return void 0;\n    };\n\n    XMLHttpRequest.nodejsSet = function(options) {\n      XMLHttpRequest.prototype.nodejsSet(options);\n      return void 0;\n    };\n\n    XMLHttpRequest.prototype.UNSENT = 0;\n\n    XMLHttpRequest.UNSENT = 0;\n\n    XMLHttpRequest.prototype.OPENED = 1;\n\n    XMLHttpRequest.OPENED = 1;\n\n    XMLHttpRequest.prototype.HEADERS_RECEIVED = 2;\n\n    XMLHttpRequest.HEADERS_RECEIVED = 2;\n\n    XMLHttpRequest.prototype.LOADING = 3;\n\n    XMLHttpRequest.LOADING = 3;\n\n    XMLHttpRequest.prototype.DONE = 4;\n\n    XMLHttpRequest.DONE = 4;\n\n    XMLHttpRequest.prototype.nodejsHttpAgent = http.globalAgent;\n\n    XMLHttpRequest.prototype.nodejsHttpsAgent = https.globalAgent;\n\n    XMLHttpRequest.prototype.nodejsBaseUrl = null;\n\n    XMLHttpRequest.prototype._restrictedMethods = {\n      CONNECT: true,\n      TRACE: true,\n      TRACK: true\n    };\n\n    XMLHttpRequest.prototype._restrictedHeaders = {\n      'accept-charset': true,\n      'accept-encoding': true,\n      'access-control-request-headers': true,\n      'access-control-request-method': true,\n      connection: true,\n      'content-length': true,\n      cookie: true,\n      cookie2: true,\n      date: true,\n      dnt: true,\n      expect: true,\n      host: true,\n      'keep-alive': true,\n      origin: true,\n      referer: true,\n      te: true,\n      trailer: true,\n      'transfer-encoding': true,\n      upgrade: true,\n      'user-agent': true,\n      via: true\n    };\n\n    XMLHttpRequest.prototype._privateHeaders = {\n      'set-cookie': true,\n      'set-cookie2': true\n    };\n\n    XMLHttpRequest.prototype._userAgent = (\"Mozilla/5.0 (\" + (os.type()) + \" \" + (os.arch()) + \") \") + (\"node.js/\" + process.versions.node + \" v8/\" + process.versions.v8);\n\n    XMLHttpRequest.prototype._setReadyState = function(newReadyState) {\n      var event;\n      this.readyState = newReadyState;\n      event = new ProgressEvent('readystatechange');\n      this.dispatchEvent(event);\n      return void 0;\n    };\n\n    XMLHttpRequest.prototype._sendFile = function() {\n      if (this._url.method !== 'GET') {\n        throw new NetworkError('The file protocol only supports GET');\n      }\n      throw new Error(\"Protocol file: not implemented\");\n    };\n\n    XMLHttpRequest.prototype._sendHttp = function(data) {\n      if (this._sync) {\n        throw new Error(\"Synchronous XHR processing not implemented\");\n      }\n      if ((data != null) && (this._method === 'GET' || this._method === 'HEAD')) {\n        console.warn(\"Discarding entity body for \" + this._method + \" requests\");\n        data = null;\n      } else {\n        data || (data = '');\n      }\n      this.upload._setData(data);\n      this._finalizeHeaders();\n      this._sendHxxpRequest();\n      return void 0;\n    };\n\n    XMLHttpRequest.prototype._sendHxxpRequest = function() {\n      var agent, hxxp, request;\n      if (this._url.protocol === 'http:') {\n        hxxp = http;\n        agent = this.nodejsHttpAgent;\n      } else {\n        hxxp = https;\n        agent = this.nodejsHttpsAgent;\n      }\n      request = hxxp.request({\n        hostname: this._url.hostname,\n        port: this._url.port,\n        path: this._url.path,\n        auth: this._url.auth,\n        method: this._method,\n        headers: this._headers,\n        agent: agent\n      });\n      this._request = request;\n      if (this.timeout) {\n        request.setTimeout(this.timeout, (function(_this) {\n          return function() {\n            return _this._onHttpTimeout(request);\n          };\n        })(this));\n      }\n      request.on('response', (function(_this) {\n        return function(response) {\n          return _this._onHttpResponse(request, response);\n        };\n      })(this));\n      request.on('error', (function(_this) {\n        return function(error) {\n          return _this._onHttpRequestError(request, error);\n        };\n      })(this));\n      this.upload._startUpload(request);\n      if (this._request === request) {\n        this._dispatchProgress('loadstart');\n      }\n      return void 0;\n    };\n\n    XMLHttpRequest.prototype._finalizeHeaders = function() {\n      this._headers['Connection'] = 'keep-alive';\n      this._headers['Host'] = this._url.host;\n      if (this._anonymous) {\n        this._headers['Referer'] = 'about:blank';\n      }\n      this._headers['User-Agent'] = this._userAgent;\n      this.upload._finalizeHeaders(this._headers, this._loweredHeaders);\n      return void 0;\n    };\n\n    XMLHttpRequest.prototype._onHttpResponse = function(request, response) {\n      var lengthString;\n      if (this._request !== request) {\n        return;\n      }\n      switch (response.statusCode) {\n        case 301:\n        case 302:\n        case 303:\n        case 307:\n        case 308:\n          this._url = this._parseUrl(response.headers['location']);\n          this._method = 'GET';\n          if ('content-type' in this._loweredHeaders) {\n            delete this._headers[this._loweredHeaders['content-type']];\n            delete this._loweredHeaders['content-type'];\n          }\n          if ('Content-Type' in this._headers) {\n            delete this._headers['Content-Type'];\n          }\n          delete this._headers['Content-Length'];\n          this.upload._reset();\n          this._finalizeHeaders();\n          this._sendHxxpRequest();\n          return;\n      }\n      this._response = response;\n      this._response.on('data', (function(_this) {\n        return function(data) {\n          return _this._onHttpResponseData(response, data);\n        };\n      })(this));\n      this._response.on('end', (function(_this) {\n        return function() {\n          return _this._onHttpResponseEnd(response);\n        };\n      })(this));\n      this._response.on('close', (function(_this) {\n        return function() {\n          return _this._onHttpResponseClose(response);\n        };\n      })(this));\n      this.responseURL = this._url.href.split('#')[0];\n      this.status = this._response.statusCode;\n      this.statusText = http.STATUS_CODES[this.status];\n      this._parseResponseHeaders(response);\n      if (lengthString = this._responseHeaders['content-length']) {\n        this._totalBytes = parseInt(lengthString);\n        this._lengthComputable = true;\n      } else {\n        this._lengthComputable = false;\n      }\n      return this._setReadyState(XMLHttpRequest.HEADERS_RECEIVED);\n    };\n\n    XMLHttpRequest.prototype._onHttpResponseData = function(response, data) {\n      if (this._response !== response) {\n        return;\n      }\n      this._responseParts.push(data);\n      this._loadedBytes += data.length;\n      if (this.readyState !== XMLHttpRequest.LOADING) {\n        this._setReadyState(XMLHttpRequest.LOADING);\n      }\n      return this._dispatchProgress('progress');\n    };\n\n    XMLHttpRequest.prototype._onHttpResponseEnd = function(response) {\n      if (this._response !== response) {\n        return;\n      }\n      this._parseResponse();\n      this._request = null;\n      this._response = null;\n      this._setReadyState(XMLHttpRequest.DONE);\n      this._dispatchProgress('load');\n      return this._dispatchProgress('loadend');\n    };\n\n    XMLHttpRequest.prototype._onHttpResponseClose = function(response) {\n      var request;\n      if (this._response !== response) {\n        return;\n      }\n      request = this._request;\n      this._setError();\n      request.abort();\n      this._setReadyState(XMLHttpRequest.DONE);\n      this._dispatchProgress('error');\n      return this._dispatchProgress('loadend');\n    };\n\n    XMLHttpRequest.prototype._onHttpTimeout = function(request) {\n      if (this._request !== request) {\n        return;\n      }\n      this._setError();\n      request.abort();\n      this._setReadyState(XMLHttpRequest.DONE);\n      this._dispatchProgress('timeout');\n      return this._dispatchProgress('loadend');\n    };\n\n    XMLHttpRequest.prototype._onHttpRequestError = function(request, error) {\n      if (this._request !== request) {\n        return;\n      }\n      this._setError();\n      request.abort();\n      this._setReadyState(XMLHttpRequest.DONE);\n      this._dispatchProgress('error');\n      return this._dispatchProgress('loadend');\n    };\n\n    XMLHttpRequest.prototype._dispatchProgress = function(eventType) {\n      var event;\n      event = new ProgressEvent(eventType);\n      event.lengthComputable = this._lengthComputable;\n      event.loaded = this._loadedBytes;\n      event.total = this._totalBytes;\n      this.dispatchEvent(event);\n      return void 0;\n    };\n\n    XMLHttpRequest.prototype._setError = function() {\n      this._request = null;\n      this._response = null;\n      this._responseHeaders = null;\n      this._responseParts = null;\n      return void 0;\n    };\n\n    XMLHttpRequest.prototype._parseUrl = function(urlString) {\n      var absoluteUrlString, index, password, user, xhrUrl;\n      if (this.nodejsBaseUrl === null) {\n        absoluteUrlString = urlString;\n      } else {\n        absoluteUrlString = url.resolve(this.nodejsBaseUrl, urlString);\n      }\n      xhrUrl = url.parse(absoluteUrlString, false, true);\n      xhrUrl.hash = null;\n      if (xhrUrl.auth && ((typeof user !== \"undefined\" && user !== null) || (typeof password !== \"undefined\" && password !== null))) {\n        index = xhrUrl.auth.indexOf(':');\n        if (index === -1) {\n          if (!user) {\n            user = xhrUrl.auth;\n          }\n        } else {\n          if (!user) {\n            user = xhrUrl.substring(0, index);\n          }\n          if (!password) {\n            password = xhrUrl.substring(index + 1);\n          }\n        }\n      }\n      if (user || password) {\n        xhrUrl.auth = user + \":\" + password;\n      }\n      return xhrUrl;\n    };\n\n    XMLHttpRequest.prototype._parseResponseHeaders = function(response) {\n      var loweredName, name, ref, value;\n      this._responseHeaders = {};\n      ref = response.headers;\n      for (name in ref) {\n        value = ref[name];\n        loweredName = name.toLowerCase();\n        if (this._privateHeaders[loweredName]) {\n          continue;\n        }\n        if (this._mimeOverride !== null && loweredName === 'content-type') {\n          value = this._mimeOverride;\n        }\n        this._responseHeaders[loweredName] = value;\n      }\n      if (this._mimeOverride !== null && !('content-type' in this._responseHeaders)) {\n        this._responseHeaders['content-type'] = this._mimeOverride;\n      }\n      return void 0;\n    };\n\n    XMLHttpRequest.prototype._parseResponse = function() {\n      var arrayBuffer, buffer, i, j, jsonError, ref, view;\n      if (Buffer.concat) {\n        buffer = Buffer.concat(this._responseParts);\n      } else {\n        buffer = this._concatBuffers(this._responseParts);\n      }\n      this._responseParts = null;\n      switch (this.responseType) {\n        case 'text':\n          this._parseTextResponse(buffer);\n          break;\n        case 'json':\n          this.responseText = null;\n          try {\n            this.response = JSON.parse(buffer.toString('utf-8'));\n          } catch (error1) {\n            jsonError = error1;\n            this.response = null;\n          }\n          break;\n        case 'buffer':\n          this.responseText = null;\n          this.response = buffer;\n          break;\n        case 'arraybuffer':\n          this.responseText = null;\n          arrayBuffer = new ArrayBuffer(buffer.length);\n          view = new Uint8Array(arrayBuffer);\n          for (i = j = 0, ref = buffer.length; 0 <= ref ? j < ref : j > ref; i = 0 <= ref ? ++j : --j) {\n            view[i] = buffer[i];\n          }\n          this.response = arrayBuffer;\n          break;\n        default:\n          this._parseTextResponse(buffer);\n      }\n      return void 0;\n    };\n\n    XMLHttpRequest.prototype._parseTextResponse = function(buffer) {\n      var e;\n      try {\n        this.responseText = buffer.toString(this._parseResponseEncoding());\n      } catch (error1) {\n        e = error1;\n        this.responseText = buffer.toString('binary');\n      }\n      this.response = this.responseText;\n      return void 0;\n    };\n\n    XMLHttpRequest.prototype._parseResponseEncoding = function() {\n      var contentType, encoding, match;\n      encoding = null;\n      if (contentType = this._responseHeaders['content-type']) {\n        if (match = /\\;\\s*charset\\=(.*)$/.exec(contentType)) {\n          return match[1];\n        }\n      }\n      return 'utf-8';\n    };\n\n    XMLHttpRequest.prototype._concatBuffers = function(buffers) {\n      var buffer, j, k, len, len1, length, target;\n      if (buffers.length === 0) {\n        return new Buffer(0);\n      }\n      if (buffers.length === 1) {\n        return buffers[0];\n      }\n      length = 0;\n      for (j = 0, len = buffers.length; j < len; j++) {\n        buffer = buffers[j];\n        length += buffer.length;\n      }\n      target = new Buffer(length);\n      length = 0;\n      for (k = 0, len1 = buffers.length; k < len1; k++) {\n        buffer = buffers[k];\n        buffer.copy(target, length);\n        length += buffer.length;\n      }\n      return target;\n    };\n\n    return XMLHttpRequest;\n\n  })(XMLHttpRequestEventTarget);\n\n  module.exports = XMLHttpRequest;\n\n  XMLHttpRequest.XMLHttpRequest = XMLHttpRequest;\n\n  SecurityError = (function(superClass) {\n    extend(SecurityError, superClass);\n\n    function SecurityError() {\n      SecurityError.__super__.constructor.apply(this, arguments);\n    }\n\n    return SecurityError;\n\n  })(Error);\n\n  XMLHttpRequest.SecurityError = SecurityError;\n\n  InvalidStateError = (function(superClass) {\n    extend(InvalidStateError, superClass);\n\n    function InvalidStateError() {\n      InvalidStateError.__super__.constructor.apply(this, arguments);\n    }\n\n    return InvalidStateError;\n\n  })(Error);\n\n  InvalidStateError = (function(superClass) {\n    extend(InvalidStateError, superClass);\n\n    function InvalidStateError() {\n      return InvalidStateError.__super__.constructor.apply(this, arguments);\n    }\n\n    return InvalidStateError;\n\n  })(Error);\n\n  XMLHttpRequest.InvalidStateError = InvalidStateError;\n\n  NetworkError = (function(superClass) {\n    extend(NetworkError, superClass);\n\n    function NetworkError() {\n      NetworkError.__super__.constructor.apply(this, arguments);\n    }\n\n    return NetworkError;\n\n  })(Error);\n\n  XMLHttpRequest.SyntaxError = SyntaxError;\n\n  SyntaxError = (function(superClass) {\n    extend(SyntaxError, superClass);\n\n    function SyntaxError() {\n      SyntaxError.__super__.constructor.apply(this, arguments);\n    }\n\n    return SyntaxError;\n\n  })(Error);\n\n  ProgressEvent = (function() {\n    function ProgressEvent(type) {\n      this.type = type;\n      this.target = null;\n      this.currentTarget = null;\n      this.lengthComputable = false;\n      this.loaded = 0;\n      this.total = 0;\n    }\n\n    ProgressEvent.prototype.bubbles = false;\n\n    ProgressEvent.prototype.cancelable = false;\n\n    ProgressEvent.prototype.target = null;\n\n    ProgressEvent.prototype.loaded = null;\n\n    ProgressEvent.prototype.lengthComputable = null;\n\n    ProgressEvent.prototype.total = null;\n\n    return ProgressEvent;\n\n  })();\n\n  XMLHttpRequest.ProgressEvent = ProgressEvent;\n\n  XMLHttpRequestUpload = (function(superClass) {\n    extend(XMLHttpRequestUpload, superClass);\n\n    function XMLHttpRequestUpload(request) {\n      XMLHttpRequestUpload.__super__.constructor.call(this);\n      this._request = request;\n      this._reset();\n    }\n\n    XMLHttpRequestUpload.prototype._reset = function() {\n      this._contentType = null;\n      this._body = null;\n      return void 0;\n    };\n\n    XMLHttpRequestUpload.prototype._setData = function(data) {\n      var body, i, j, k, offset, ref, ref1, view;\n      if (typeof data === 'undefined' || data === null) {\n        return;\n      }\n      if (typeof data === 'string') {\n        if (data.length !== 0) {\n          this._contentType = 'text/plain;charset=UTF-8';\n        }\n        this._body = new Buffer(data, 'utf8');\n      } else if (Buffer.isBuffer(data)) {\n        this._body = data;\n      } else if (data instanceof ArrayBuffer) {\n        body = new Buffer(data.byteLength);\n        view = new Uint8Array(data);\n        for (i = j = 0, ref = data.byteLength; 0 <= ref ? j < ref : j > ref; i = 0 <= ref ? ++j : --j) {\n          body[i] = view[i];\n        }\n        this._body = body;\n      } else if (data.buffer && data.buffer instanceof ArrayBuffer) {\n        body = new Buffer(data.byteLength);\n        offset = data.byteOffset;\n        view = new Uint8Array(data.buffer);\n        for (i = k = 0, ref1 = data.byteLength; 0 <= ref1 ? k < ref1 : k > ref1; i = 0 <= ref1 ? ++k : --k) {\n          body[i] = view[i + offset];\n        }\n        this._body = body;\n      } else {\n        throw new Error(\"Unsupported send() data \" + data);\n      }\n      return void 0;\n    };\n\n    XMLHttpRequestUpload.prototype._finalizeHeaders = function(headers, loweredHeaders) {\n      if (this._contentType) {\n        if (!('content-type' in loweredHeaders)) {\n          headers['Content-Type'] = this._contentType;\n        }\n      }\n      if (this._body) {\n        headers['Content-Length'] = this._body.length.toString();\n      }\n      return void 0;\n    };\n\n    XMLHttpRequestUpload.prototype._startUpload = function(request) {\n      if (this._body) {\n        request.write(this._body);\n      }\n      request.end();\n      return void 0;\n    };\n\n    return XMLHttpRequestUpload;\n\n  })(XMLHttpRequestEventTarget);\n\n  XMLHttpRequest.XMLHttpRequestUpload = XMLHttpRequestUpload;\n\n}).call(this);\n","/**\n * Converts a Uint8Array to a String.\n * @param {Uint8Array} array that should be converted\n * @param {Number} offset array offset in case only subset of array items should be extracted (default: 0)\n * @param {Number} limit maximum number of array items that should be extracted (defaults to length of array)\n * @returns {String}\n */\nfunction uint8ArrayToString(arr, offset, limit) {\n  offset = offset || 0;\n  limit = limit || arr.length - offset;\n  let str = '';\n  for (let i = offset; i < offset + limit; i++) {\n    str += String.fromCharCode(arr[i]);\n  }\n  return str;\n}\n\n\n/**\n * Converts a String to a Uint8Array.\n * @param {String} str string that should be converted\n * @returns {Uint8Array}\n */\nfunction stringToUint8Array(str) {\n  const arr = new Uint8Array(str.length);\n  for (let i = 0, j = str.length; i < j; i++) {\n    arr[i] = str.charCodeAt(i);\n  }\n  return arr;\n}\n\n\n/**\n * Identifies the boundary in a multipart/related message header.\n * @param {String} header message header\n * @returns {String} boundary\n */\nfunction identifyBoundary(header) {\n  const parts = header.split('\\r\\n');\n  for (let i = 0; i < parts.length; i++) {\n    if (parts[i].substr(0, 2) === '--') {\n      return parts[i];\n    }\n  }\n}\n\n\n/**\n * Checks whether a given token is contained by a message at a given offset.\n * @param {Uint8Array} message message content\n * @param {Uint8Array} token substring that should be present\n * @param {String} offset offset in message content from where search should start\n * @returns {Boolean} whether message contains token at offset\n */\nfunction containsToken(message, token, offset) {\n  if (message + token.length > message.length) {\n    return false;\n  }\n  let index = offset;\n  for (let i = 0; i < token.length; i++) {\n    if (token[i] !== message[index++]) {\n      return false;\n    }\n  }\n  return true;\n}\n\n\n/**\n * Finds a given token in a message at a given offset.\n * @param {Uint8Array} message message content\n * @param {Uint8Array} token substring that should be found\n * @param {String} offset message body offset from where search should start\n * @returns {Boolean} whether message has a part at given offset or not\n */\nfunction findToken(message, token, offset) {\n  offset = offset || 0;\n  for (let i = offset; i < message.length; i++) {\n    if (token[0] === message[i]) {\n      if (containsToken(message, token, i)) {\n        return i;\n      }\n    }\n  }\n  return -1;\n}\n\nexport { containsToken, findToken, identifyBoundary, uint8ArrayToString, stringToUint8Array };\n","import 'ajv';\nimport 'xhr2';\n\nconst ajv = Ajv({ allErrors:true, removeAdditional:'all' })\nconst retrieveStudyMetadata = require('../schema/retrieveStudyMetadata.schema')\n\najv.addSchema(retrieveStudyMetadata, 'retrieveStudyMetadata');\n\nimport {\n  containsToken, findToken, identifyBoundary,\n  uint8ArrayToString, stringToUint8Array\n} from './message.js';\n\nfunction isEmptyObject (obj) {\n    return Object.keys(obj).length === 0 && obj.constructor === Object;\n}\n\n/**\n* Class for interacting with DICOMweb RESTful services.\n*/\nclass DICOMwebClient {\n\n  /**\n  * @constructor\n  * @param {Object} options (choices: \"url\", \"username\", \"password\")\n  */\n  constructor(options) {\n    this.baseURL = options.url;\n    if ('username' in options) {\n      this.username = options.username;\n      if (!('password' in options)) {\n        console.error('no password provided to authenticate with DICOMweb service')\n      }\n      this.password = options.password;\n    }\n  }\n\n  static _parseQueryParameters(params={}) {\n    let queryString = '?';\n    Object.keys(params).forEach(function (key, index) {\n      if (index !== 0) {\n        queryString += '&'\n      }\n      queryString += key + '=' + window.encodeURIComponent(params[key]);\n    });\n    return queryString\n  }\n\n  _httpRequest(url, method, headers, options={}) {\n    return new Promise( (resolve, reject) => {\n      const request = new XMLHttpRequest();\n      request.open(method, url, true);\n      if ('responseType' in options) {\n        request.responseType = options.responseType;\n      }\n\n      if (typeof(headers) === 'object') {\n        Object.keys(headers).forEach(function (key) {\n          request.setRequestHeader(key, headers[key]);\n        });\n      }\n\n      // Event triggered when upload starts\n      request.onloadstart = function (event) {\n        // console.log('upload started: ', url)\n      };\n\n      // Event triggered when upload ends\n      request.onloadend = function (event) {\n        // console.log('upload finished')\n      };\n\n      // Handle response message\n      request.onreadystatechange = function (event) {\n        if (request.readyState === 4) {\n          if (request.status === 200) {\n            resolve(request.response);\n          } else if (request.status === 202) {\n            console.warn('some resources already existed: ', request);\n            resolve(request.response);\n          } else if (request.status === 204) {\n            console.warn('empty response for request: ', request);\n            resolve([]);\n          } else {\n            console.error('request failed: ', request);\n            reject(request);\n          }\n        }\n      };\n\n      // Event triggered while download progresses\n      if ('progressCallback' in options) {\n        if (typeof(options.progressCallback) === 'function') {\n          request.onprogress = options.progressCallback();\n        }\n      }\n\n      // request.onprogress = function (event) {\n      //   const loaded = progress.loaded;\n      //   let total;\n      //   let percentComplete;\n      //   if (progress.lengthComputable) {\n      //     total = progress.total;\n      //     percentComplete = Math.round((loaded / total) * 100);\n      //   j\n      //   // console.log('download progress: ', percentComplete, ' %');\n      //   return(percentComplete);\n      // };\n\n      if ('data' in options) {\n        request.send(options.data);\n      } else {\n        request.send();\n      }\n    });\n  }\n\n  _httpGet(url, headers, responseType, progressCallback) {\n    return this._httpRequest(url, 'get', headers, {responseType, progressCallback});\n  }\n\n  _httpGetApplicationJson(url, params={}, progressCallback) {\n    if (typeof(params) === 'object') {\n      if (!isEmptyObject(params)) {\n          url += DICOMwebClient._parseQueryParameters(params)\n      }\n    }\n    const headers = {'Accept': 'application/dicom+json'};\n    const responseType = 'json';\n    return this._httpGet(url, headers, responseType, progressCallback);\n  }\n\n  _httpGetApplicationOctetStream(url, params={}, progressCallback) {\n    if (typeof(params) === 'object') {\n      if (!isEmptyObject(params)) {\n          url += DICOMwebClient._parseQueryParameters(params)\n      }\n    }\n    const headers = {'Accept': 'multipart/related; type=\"application/octet-stream\"'};\n    const responseType = 'arraybuffer';\n    return this._httpGet(url, headers, responseType, progressCallback);\n  }\n\n  _httpGetImageJpeg(url, params={}, progressCallback) {\n    if (typeof(params) === 'object') {\n      if (!isEmptyObject(params)) {\n          url += DICOMwebClient._parseQueryParameters(params)\n      }\n    }\n    const headers = {'Accept': 'multipart/related; type=\"image/jpeg\"'};\n    const responseType = 'arraybuffer';\n    return this._httpGet(url, headers, responseType, progressCallback);\n  }\n\n  _httpGetImageJpeg2000(url, params={}, progressCallback) {\n    if (typeof(params) === 'object') {\n      if (!isEmptyObject(params)) {\n          url += DICOMwebClient._parseQueryParameters(params)\n      }\n    }\n    const headers = {'Accept': 'multipart/related; type=\"image/jp2\"'};\n    const responseType = 'arraybuffer';\n    return this._httpGet(url, headers, responseType, progressCallback);\n  }\n\n  _httpGetImageJpegLs(url, params={}, progressCallback) {\n    if (typeof(params) === 'object') {\n      if (!isEmptyObject(params)) {\n          url += DICOMwebClient._parseQueryParameters(params)\n      }\n    }\n    const headers = {'Accept': 'multipart/related; type=\"image/x-jls\"'};\n    const responseType = 'arraybuffer';\n    return this._httpGet(url, headers, responseType, progressCallback);\n  }\n\n  _httpPost(url, headers, data, progressCallback) {\n    return this._httpRequest(url, 'post', headers, {data, progressCallback});\n  }\n\n  _httpPostApplicationDicom(url, data, progressCallback) {\n    const headers = {'Content-Type': 'application/dicom'};\n    return this._httpPost(url, headers, data, progressCallback);\n  }\n\n  _httpPostApplicationJson(url, data, progressCallback) {\n    const headers = {'Content-Type': 'application/dicom+json'};\n    return this._httpPost(url, headers, data, progressCallback);\n  }\n\n  /**\n   * Searches for DICOM studies.\n   * @param {Object} queryParams optional query parameters (choices: \"fuzzymatching\", \"offset\", \"limit\" or any valid DICOM attribute identifier)\n   * @return {Array} study representations (http://dicom.nema.org/medical/dicom/current/output/chtml/part18/sect_6.7.html#table_6.7.1-2)\n   */\n  searchForStudies(queryParams={}) {\n    console.log('search for studies');\n    let url = this.baseURL +\n              '/studies';\n    if (queryParams) {\n        url += DICOMwebClient._parseQueryParameters(queryParams);\n    }\n    return(this._httpGetApplicationJson(url));\n  }\n\n  /**\n   * Retrieves metadata for a DICOM study.\n   * @param {String} studyInstanceUID Study Instance UID\n   * @returns {Array} metadata elements in DICOM JSON format for each instance belonging to the study\n   */\n  retrieveStudyMetadata(studyInstanceUID, queryParams={}) {\n    const schemaName = 'retrieveStudyMetadata';\n\n    ajv.validate(schemaName, args);\n\n    console.log(`retrieve metadata of study ${studyInstanceUID}`);\n    const url = this.baseURL +\n              '/studies/' + studyInstanceUID +\n              '/metadata';\n    return(this._httpGetApplicationJson(url));\n  }\n\n  /**\n   * Searches for DICOM series.\n   * @param {Object} options optional DICOM identifiers (choices: \"studyInstanceUID\")\n   * @param {Object} queryParams optional query parameters (choices: \"fuzzymatching\", \"offset\", \"limit\" or any valid DICOM attribute identifier)\n   * @returns {Array} series representations (http://dicom.nema.org/medical/dicom/current/output/chtml/part18/sect_6.7.html#table_6.7.1-2a)\n   */\n  searchForSeries(options={}, queryParams={}) {\n    console.log(`search series of study ${options.studyInstanceUID}`);\n    let url = this.baseURL;\n    if ('studyInstanceUID' in options) {\n        url += '/studies/' + options.studyInstanceUID;\n    }\n    url += '/series';\n    if (options.queryParams) {\n        url += DICOMwebClient._parseQueryParameters(options.queryParams);\n    }\n    return(this._httpGetApplicationJson(url));\n  }\n\n  /**\n   * Retrieves metadata for a DICOM series.\n   * @param {String} studyInstanceUID Study Instance UID\n   * @param {String} seriesInstanceUID Series Instance UID\n   * @returns {Array} metadata elements in DICOM JSON format for each instance belonging to the series\n   */\n  retrieveSeriesMetadata(studyInstanceUID, seriesInstanceUID) {\n    console.log(`retrieve metadata of series ${seriesInstanceUID}`);\n    if (studyInstanceUID === undefined) {\n      console.error('Study Instance UID is required for retrieval of series metadata')\n    }\n    if (seriesInstanceUID === undefined) {\n      console.error('Series Instance UID is required for retrieval of series metadata')\n    }\n    const url = this.baseURL +\n              '/studies/' + studyInstanceUID +\n              '/series/' + seriesInstanceUID +\n              '/metadata';\n    return(this._httpGetApplicationJson(url));\n  }\n\n  /**\n   * Searches for DICOM instances.\n   * @param {Object} options optional DICOM identifiers (choices: \"studyInstanceUID\", \"seriesInstanceUID\")\n   * @param {Object} queryParams optional query parameters (choices: \"fuzzymatching\", \"offset\", \"limit\" or any valid DICOM attribute identifier)\n   * @returns {Array} instance representations (http://dicom.nema.org/medical/dicom/current/output/chtml/part18/sect_6.7.html#table_6.7.1-2b)\n   */\n  searchForInstances(options={}, queryParams={}) {\n    let url = this.baseURL;\n    if ('studyInstanceUID' in options) {\n      url += '/studies/' + options.studyInstanceUID;\n      if ('seriesInstanceUID' in options) {\n        console.log(`search for instances of series ${options.seriesInstanceUID}`);\n        url += '/series/' + options.seriesInstanceUID;\n      } else {\n        console.error('study needs to be specified when searching for instances of a given series');\n      }\n    } else {\n      console.log('search for instances');\n    }\n    url += '/instances';\n    if (queryParams) {\n        url += DICOMwebClient._parseQueryParameters(queryParams);\n    }\n    return(this._httpGetApplicationJson(url));\n  }\n\n  /**\n   * Retrieves metadata for a DICOM instance.\n   * @param {String} studyInstanceUID Study Instance UID\n   * @param {String} seriesInstanceUID Series Instance UID\n   * @param {String} sopInstanceUID SOP Instance UID\n   * @returns {Object} metadata elements in DICOM JSON format\n   */\n  retrieveInstanceMetadata(studyInstanceUID, seriesInstanceUID, sopInstanceUID) {\n    console.log(`retrieve metadata of instance ${sopInstanceUID}`);\n    if (studyInstanceUID === undefined) {\n      console.error('Study Instance UID is required for retrieval of instance metadata')\n    }\n    if (seriesInstanceUID === undefined) {\n      console.error('Series Instance UID is required for retrieval of instance metadata')\n    }\n    if (sopInstanceUID === undefined) {\n      console.error('SOP Instance UID is required for retrieval of instance metadata')\n    }\n    const url = this.baseURL +\n              '/studies/' + studyInstanceUID +\n              '/series/' + seriesInstanceUID +\n              '/instances/' + sopInstanceUID +\n              '/metadata';\n    return(this._httpGetApplicationJson(url));\n  }\n\n  /**\n   * Retrieves frames for a DICOM instance.\n   * @param {String} studyInstanceUID Study Instance UID\n   * @param {String} seriesInstanceUID Series Instance UID\n   * @param {String} sopInstanceUID SOP Instance UID\n   * @param {Array} frameNumbers one-based index of frames\n   * @param {Object} options optionial parameters (key \"imageSubtype\" to specify MIME image subtypes)\n   * @returns {Array} frame items as byte arrays of the pixel data element\n   */\n  retrieveInstanceFrames(studyInstanceUID, seriesInstanceUID, sopInstanceUID, frameNumbers, options={}) {\n    console.log(`retrieve frames ${frameNumbers.toString()} of instance ${sopInstanceUID}`);\n    if (studyInstanceUID === undefined) {\n      console.error('Study Instance UID is required for retrieval of instance frames')\n    }\n    if (seriesInstanceUID === undefined) {\n      console.error('Series Instance UID is required for retrieval of instance frames')\n    }\n    if (sopInstanceUID === undefined) {\n      console.error('SOP Instance UID is required for retrieval of instance frames')\n    }\n    if (frameNumbers === undefined) {\n      console.error('frame numbers are required for retrieval of instance frames')\n    }\n    const url = this.baseURL +\n              '/studies/' + studyInstanceUID +\n              '/series/' + seriesInstanceUID +\n              '/instances/' + sopInstanceUID +\n              '/frames/' + frameNumbers.toString();\n    options.imageSubtype = options.imageSubtype || undefined;\n    var func = this._httpGetApplicationOctetStream;\n    if (options.imageSubtype) {\n        if (options.imageSubtype === 'jpeg') {\n            func = this._httpGetImageJpeg;\n        } else if (options.imageSubtype === 'x-jls') {\n            func = this._httpGetImageJpeg2000;\n        } else if (options.imageSubtype === 'jp2') {\n            func = this._httpGetImageJpeg2000;\n        } else {\n            console.error(`MIME type \"image/${options.imageSubtype}\" is not supported`)\n        }\n    }\n\n    // FIXME\n    return(this._httpGetImageJpeg(url).then((response) => {\n      const message = new Uint8Array(response);\n\n      // First look for the multipart mime header\n      let separator = stringToUint8Array('\\r\\n\\r\\n');\n      const headerIndex = findToken(message, separator);\n      if (headerIndex === -1) {\n        console.error('response message has no multipart mime header');\n      }\n      const header = uint8ArrayToString(message, 0, headerIndex);\n\n      const boundary = identifyBoundary(header);\n      if (!boundary) {\n        console.error('header of response message does not specify boundary');\n      }\n\n      var frames = [];\n      var offset = headerIndex + separator.length;\n      for (let i = 0; i < frameNumbers.length; i++) {\n        let boundaryIndex = findToken(message, boundary, offset);\n        let length = boundaryIndex - offset - 2; // exclude \"\\r\\n\"\n\n        // Extract pixel data from response message\n        let pixels = response.slice(offset, offset + length);\n        frames.push(pixels);\n\n        offset += length + 2;\n      }\n      return frames;\n\n    }));\n  }\n\n  /**\n   * Stores DICOM instances.\n   * @param {Array} datasets DICOM datasets of instances that should be stored in DICOM JSON format\n   * @param {Object} options optional parameters (key \"studyInstanceUID\" to only store instances of a given study)\n   */\n  storeInstances(datasets, options={}) {\n    let url = this.baseURL;\n    if ('studyInstanceUID' in options) {\n      url += '/studies/' + options.studyInstanceUID;\n    }\n    console.error('storing instances is not yet implemented')\n  }\n\n}\n\nexport { DICOMwebClient };\n","function findSubstring(str, before, after) {\n    const beforeIndex = str.lastIndexOf(before) + before.length;\n    if (beforeIndex < before.length) {\n        return(null);\n    }\n    if (after !== undefined) {\n        const afterIndex = str.lastIndexOf(after);\n        if (afterIndex < 0) {\n            return(null);\n        } else{\n            return(str.substring(beforeIndex, afterIndex));\n        }\n    }\n    return(str.substring(beforeIndex));\n}\n\n\nfunction getStudyInstanceUIDFromUri(uri) {\n  var uid = findSubstring(uri, \"studies/\", \"/series\");\n  if (!uid) {\n    var uid = findSubstring(uri, \"studies/\");\n  }\n  if (!uid) {\n    console.debug('Study Instance UID could not be dertermined from URI \"' + uri + '\"');\n  }\n  return(uid);\n}\n\n\nfunction getSeriesInstanceUIDFromUri(uri) {\n  var uid = findSubstring(uri, \"series/\", \"/instances\");\n  if (!uid) {\n    var uid = findSubstring(uri, \"series/\");\n  }\n  if (!uid) {\n    console.debug('Series Instance UID could not be dertermined from URI \"' + uri + '\"');\n  }\n  return(uid);\n}\n\n\nfunction getSOPInstanceUIDFromUri(uri) {\n  var uid = findSubstring(uri, \"/instances/\", \"/frames\");\n  if (!uid) {\n    var uid = findSubstring(uri, \"/instances/\", \"/metadata\");\n  }\n  if (!uid) {\n    var uid = findSubstring(uri, \"/instances/\");\n  }\n  if (!uid) {\n    console.debug('SOP Instance UID could not be dertermined from URI\"' + uri + '\"');\n  }\n  return(uid);\n}\n\n\nfunction getFrameNumbersFromUri(uri) {\n  let numbers = findSubstring(uri, \"/frames/\");\n  if (numbers === undefined) {\n    console.debug('Frames Numbers could not be dertermined from URI\"' + uri + '\"');\n  }\n  return(numbers.split(','));\n}\n\n\nexport {\n  getStudyInstanceUIDFromUri, getSeriesInstanceUIDFromUri,\n  getSOPInstanceUIDFromUri, getFrameNumbersFromUri\n};\n","import { DICOMwebClient } from './api.js';\nimport { \n  getStudyInstanceUIDFromUri, getSeriesInstanceUIDFromUri,\n  getSOPInstanceUIDFromUri, getFrameNumbersFromUri\n} from './utils.js';\n\nlet api = {\n  DICOMwebClient,\n};\nlet utils = {\n  getStudyInstanceUIDFromUri,\n  getSeriesInstanceUIDFromUri,\n  getSOPInstanceUIDFromUri,\n  getFrameNumbersFromUri\n};\n\nexport { api, utils };\n"],"names":["Ajv","this"],"mappings":"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"}